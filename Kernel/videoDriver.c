#include <videoDriver.h>

struct vbe_mode_info_structure {
	uint16_t attributes;		// deprecated, only bit 7 should be of interest to you, and it indicates the mode supports a linear frame buffer.
	uint8_t window_a;			// deprecated
	uint8_t window_b;			// deprecated
	uint16_t granularity;		// deprecated; used while calculating bank numbers
	uint16_t window_size;
	uint16_t segment_a;
	uint16_t segment_b;
	uint32_t win_func_ptr;		// deprecated; used to switch banks from protected mode without returning to real mode
	uint16_t pitch;			// number of bytes per horizontal line
	uint16_t width;			// width in pixels
	uint16_t height;		// height in pixels
	uint8_t w_char;			// unused...
	uint8_t y_char;			// ...
	uint8_t planes;
	uint8_t bpp;			// bits per pixel in this mode
	uint8_t banks;			// deprecated; total number of banks in this mode
	uint8_t memory_model;
	uint8_t bank_size;		// deprecated; size of a bank, almost always 64 KB but may be 16 KB...
	uint8_t image_pages;
	uint8_t reserved0;
 
	uint8_t red_mask;
	uint8_t red_position;
	uint8_t green_mask;
	uint8_t green_position;
	uint8_t blue_mask;
	uint8_t blue_position;
	uint8_t reserved_mask;
	uint8_t reserved_position;
	uint8_t direct_color_attributes;
 
	uint32_t framebuffer;		// physical address of the linear frame buffer; write here to draw to the screen
	uint32_t off_screen_mem_off;
	uint16_t off_screen_mem_size;	// size of memory in the framebuffer but not being displayed on the screen
	uint8_t reserved1[206];
} __attribute__ ((packed));

typedef struct vbe_mode_info_structure * VBEInfoPtr;

VBEInfoPtr VBE_mode_info = (VBEInfoPtr) 0x0000000000005C00;

void putPixel(uint32_t hexColor, uint64_t x, uint64_t y) {
    uint8_t * framebuffer = (uint8_t *) VBE_mode_info->framebuffer;
    uint64_t offset = (x * ((VBE_mode_info->bpp)/8)) + (y * VBE_mode_info->pitch);
    framebuffer[offset]     =  (hexColor) & 0xFF;
    framebuffer[offset+1]   =  (hexColor >> 8) & 0xFF;
    framebuffer[offset+2]   =  (hexColor >> 16) & 0xFF;
}

void a() {

    int a = (uint32_t) VBE_mode_info->height;

    //int a = 123456789;

    for (int i = 0; a > 0; a/=10, i++) {
        drawchar(a%10 + '0', 0x80 + i * 8, 0x200, 0xffffffff, 0x00);
    }

}

// static uint8_t screen_char[(DIM_X/CHAR_WIDTH) * (DIM_Y/CHAR_HEIGHT)] = {0x00}; // CAMBIAR
// static uint8_t * screen_char_ptr = screen_char;

static uint8_t font_bitmap[256 * CHAR_HEIGHT] = {
    // Relleno para las primeras letras (Espacio, s√≠mbolos, etc.)
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    

    // Font para la letra ' '
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    // Font para la letra '!'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00011000,
    0b00011000,
    0b00011000,
    0b00011000,
    0b00011000,
    0b00011000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00000000,
    0b00000000,
    // Font para la letra ' " '
    0b00000000,
    0b01100110,
    0b01100110,
    0b01000100,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    // Font para la letra '#'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00001010,
    0b00010100,
    0b01111110,
    0b00010100,
    0b01111110,
    0b00100100,
    0b01001000,
    0b00000000,
    0b00000000,
    0b00000000,
    // Font para la letra '$'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00111110,
    0b01011000,
    0b01011000,
    0b00111000,
    0b00011100,
    0b00011010,
    0b00011010,
    0b00011100,
    0b01111000,
    0b00011000,
    0b00000000,
    0b00000000,

    // Font para la letra '%'
    0b00000000,
    0b00000000,
    0b00110000,
    0b01001000,
    0b00110010,
    0b00000100,
    0b00001000,
    0b00010000,
    0b00100000,
    0b01001100,
    0b00010010,
    0b00001100,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '&'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00100100,
    0b00100000,
    0b00100000,
    0b00010000,
    0b00110000,
    0b01001010,
    0b01000110,
    0b00111010,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '''
    0b00000000,
    0b00011000,
    0b00011000,
    0b00010000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '('
    0b00000000,
    0b00000000,
    0b00001100,
    0b00010000,
    0b00010000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00010000,
    0b00010000,
    0b00001100,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra ')'
    0b00000000,
    0b00000000,
    0b00110000,
    0b00001000,
    0b00001000,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00001000,
    0b00001000,
    0b00110000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '*'
    0b00000000,
    0b00000000,
    0b00010000,
    0b01010010,
    0b00110100,
    0b00011000,
    0b00110100,
    0b01010010,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '+'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00010000,
    0b00010000,
    0b01111100,
    0b00010000,
    0b00010000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra ','
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00010000,
    0b00100000,

    // Font para la letra '-'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '.'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00000000,
    0b00000000,

    // Font para la letra '/'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000100,
    0b00000100,
    0b00001000,
    0b00001000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00100000,
    0b00100000,
    0b01000000,
    0b01000000,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '0' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000110,
    0b01001010,
    0b01001010,
    0b01001010,
    0b01010010,
    0b01010010,
    0b01100010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '1' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00001000,
    0b00011000,
    0b00101000,
    0b01001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b01111110,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '2' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000100,
    0b00001000,
    0b00010000,
    0b00100000,
    0b01000000,
    0b01111110,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '3' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b00000010,
    0b00000010,
    0b00000100,
    0b00111000,
    0b00000100,
    0b00000010,
    0b00000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '4' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000100,
    0b00001100,
    0b00010100,
    0b00100100,
    0b01000100,
    0b01111110,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '5' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01111100,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b01111100,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '6' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000000,
    0b01000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '7' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b00000010,
    0b00000010,
    0b00000100,
    0b00000100,
    0b00001000,
    0b00001000,
    0b00010000,
    0b00010000,
    0b00100000,
    0b00100000,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '8' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para el n√∫mero '9' estirado
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111110,
    0b00000010,
    0b00000010,
    0b00000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para la letra ':'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra ';'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00011000,
    0b00010000,
    0b00100000,
    0b00000000,
    0b00000000,

    // Font para la letra '<'
    0b00000000,
    0b00000000,
    0b00000010,
    0b00000100,
    0b00001000,
    0b00010000,
    0b00100000,
    0b01000000,
    0b00100000,
    0b00010000,
    0b00001000,
    0b00000100,
    0b00000010,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '='
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b00000000,
    0b00000000,
    0b01111110,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '>'
    0b00000000,
    0b00000000,
    0b01000000,
    0b00100000,
    0b00010000,
    0b00001000,
    0b00000100,
    0b00000010,
    0b00000100,
    0b00001000,
    0b00010000,
    0b00100000,
    0b01000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '?'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b00000100,
    0b00001000,
    0b00001000,
    0b00000000,
    0b00001000,
    0b00001000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra '@'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01011110,
    0b01010110,
    0b01010110,
    0b01011110,
    0b01000000,
    0b00111110,
    0b00000000,
    0b00000000,
    0b00000000,


    // Font para la letra 'A'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111110,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'B'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'C'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'D'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'E'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01111000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01111110,
    0b00000000,
    0b00000000,
    // Font para la letra 'F'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01111000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b00000000,
    0b00000000,
    // Font para la letra 'G'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111110,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01001110,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'H'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111110,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'I'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111110,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00111110,
    0b00000000,
    0b00000000,
    // Font para la letra 'J'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111110,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'K'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000100,
    0b01001000,
    0b01110000,
    0b01001100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'L'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01111110,
    0b00000000,
    0b00000000,
    // Font para la letra 'M'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01100110,
    0b01100110,
    0b01011010,
    0b01011010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'N'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01100010,
    0b01100010,
    0b01010010,
    0b01010010,
    0b01011010,
    0b01001010,
    0b01000110,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'O'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'P'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111100,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b00000000,
    0b00000000,
    // Font para la letra 'Q'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01001010,
    0b01000100,
    0b00111010,
    0b00000000,
    0b00000000,
    // Font para la letra 'P'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'S'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111110,
    0b01000000,
    0b01000000,
    0b01000000,
    0b00111100,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'T'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111110,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00000000,
    0b00000000,
    // Font para la letra 'U'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,
    // Font para la letra 'V' 
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00100100,
    0b00100100,
    0b00100100,
    0b00011000,
    0b00011000,
    0b00000000,
    0b00000000,
    // Font para la letra 'W'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01011010,
    0b01011010,
    0b01100110,
    0b01100110,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'X'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b00100100,
    0b00100100,
    0b00011000,
    0b00011000,
    0b00100100,
    0b00100100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,
    // Font para la letra 'Y'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00100010,
    0b00100010,
    0b00010100,
    0b00010100,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00000000,
    0b00000000,
    // Font para la letra 'Z' [REVISAR]
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b00000100,
    0b00000100,
    0b00001000,
    0b00001000,
    0b00010000,
    0b00010000,
    0b00100000,
    0b00100000,
    0b01000000,
    0b01111110,
    0b00000000,
    0b00000000,
    // Font para el caracter '['
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para el caracter '\'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000000,
    0b01000000,
    0b00100000,
    0b00100000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00001000,
    0b00001000,
    0b00000100,
    0b00000100,
    0b00000000,
    0b00000000,

    // Font para el caracter ']'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para el caracter '^'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00001000,
    0b00010100,
    0b00100010,
    0b01000001,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para el caracter '_'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111111,
    0b00000000,

    // Font para el caracter '`'
    0b00000000,
    0b00010000,
    0b00001000,
    0b00000100,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,

    // Font para la letra 'a'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b00000010,
    0b00000010,
    0b00111110,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111110,
    0b00000000,
    0b00000000,

    // Font para la letra 'b'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000000,
    0b01000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111100,
    0b00000000,
    0b00000000,

    // Font para la letra 'c'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para la letra 'd'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000010,
    0b00000010,
    0b00111110,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111110,
    0b00000000,
    0b00000000,

    // Font para la letra 'e'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111110,
    0b01000000,
    0b01000000,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para la letra 'f'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00001110,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00111100,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00000000,
    0b00000000,

    // Font para la letra 'g'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111110,
    0b00000010,
    0b00000010,
    0b01111100,
    0b00000000,
    0b00000000,

    // Font para la letra 'h'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,

    // Font para la letra 'i'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00001000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00011100,
    0b00000000,
    0b00000000,

    // Font para la letra 'j'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00001000,
    0b00000000,
    0b00000000,
    0b00011000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b01001000,
    0b00110000,
    0b00000000,
    0b00000000,

    // Font para la letra 'k'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000000,
    0b01000000,
    0b01000010,
    0b01000100,
    0b01000100,
    0b01001000,
    0b01110000,
    0b01001000,
    0b01000100,
    0b01000100,
    0b01000010,
    0b00000000,
    0b00000000,

    // Font para la letra 'l'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00110000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00111000,
    0b00000000,
    0b00000000,

    // Font para la letra 'm'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111110,
    0b01001001,
    0b01001001,
    0b01001001,
    0b01001001,
    0b01001001,
    0b01001001,
    0b01001001,
    0b01001001,
    0b00000000,
    0b00000000,

    // Font para la letra 'n'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00000000,
    0b00000000,

    // Font para la letra 'o'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111100,
    0b00000000,
    0b00000000,

    // Font para la letra 'p'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01111100,
    0b01000000,
    0b01000000,
    0b01000000,
    0b00000000,

    // Font para la letra 'q'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111100,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111110,
    0b00000010,
    0b00000010,
    0b00000010,
    0b00000000,

    // Font para la letra 'r'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000000,
    0b01001100,
    0b01010010,
    0b01100000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b01000000,
    0b00000000,
    0b00000000,

    // Font para la letra 's'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00111110,
    0b01000000,
    0b01000000,
    0b01000000,
    0b00111100,
    0b00000010,
    0b00000010,
    0b00000010,
    0b01111100,
    0b00000000,
    0b00000000,

    // Font para la letra 't'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00100000,
    0b00100000,
    0b01111000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100000,
    0b00100100,
    0b00011000,
    0b00000000,
    0b00000000,

    // Font para la letra 'u'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00111110,
    0b00000000,
    0b00000000,

    // Font para la letra 'v'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000010,
    0b00100010,
    0b00100100,
    0b00100100,
    0b00100100,
    0b00010100,
    0b00001000,
    0b00000000,
    0b00000000,

    // Font para la letra 'w'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01000010,
    0b01001010,
    0b01001010,
    0b01011010,
    0b01010110,
    0b00100100,
    0b00000000,
    0b00000000,

    // Font para la letra 'x'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00100010,
    0b00100010,
    0b00010100,
    0b00001000,
    0b00001000,
    0b00010100,
    0b00100010,
    0b00100010,
    0b00100010,
    0b00000000,
    0b00000000,

    // Font para la letra 'y'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01000100,
    0b01000100,
    0b01000100,
    0b01000100,
    0b01000100,
    0b00111100,
    0b00000100,
    0b00000100,
    0b00000100,
    0b00111000,
    0b00000000,

    // Font para la letra 'z'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b01111100,
    0b00000100,
    0b00000100,
    0b00001000,
    0b00010000,
    0b00100000,
    0b01000000,
    0b01000000,
    0b01111100,
    0b00000000,
    0b00000000,

    // Font para el caracter '{'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00001110,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00110000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00010000,
    0b00001110,
    0b00000000,
    0b00000000,

    // Font para el caracter '|'
    0b00000000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00000000,

    // Font para el caracter '}'
    0b00000000,
    0b00000000,
    0b00000000,
    0b01110000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001100,
    0b00001000,
    0b00001000,
    0b00001000,
    0b00001000,
    0b01110000,
    0b00000000,
    0b00000000,

    // Font para el caracter '~'
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00110010,
    0b01001100,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,
    0b00000000,


    // Seguir con el resto de caracteres...
};

static int printableAscii[] = {
    [0x01] = -1,   // escape no tiene car√°cter imprimible
    [0x02] = '1',
    [0x03] = '2',
    [0x04] = '3',
    [0x05] = '4',
    [0x06] = '5',
    [0x07] = '6',
    [0x08] = '7',
    [0x09] = '8',
    [0x0A] = '9',
    [0x0B] = '0',
    [0x0C] = '-',
    [0x0D] = '=',
    [0x0E] = -1,   // backspace no es imprimible
    [0x0F] = -1,   // tab no es imprimible
    [0x10] = 'q',
    [0x11] = 'w',
    [0x12] = 'e',
    [0x13] = 'r',
    [0x14] = 't',
    [0x15] = 'y',
    [0x16] = 'u',
    [0x17] = 'i',
    [0x18] = 'o',
    [0x19] = 'p',
    [0x1A] = '[',
    [0x1B] = ']',
    [0x1C] = -1,   // enter no es imprimible
    [0x1D] = -1,   // left control no es imprimible
    [0x1E] = 'a',
    [0x1F] = 's',
    [0x20] = 'd',
    [0x21] = 'f',
    [0x22] = 'g',
    [0x23] = 'h',
    [0x24] = 'j',
    [0x25] = 'k',
    [0x26] = 'l',
    [0x27] = ';',
    [0x28] = '\'',
    [0x29] = '`',
    [0x2A] = -1,   // left shift no es imprimible
    [0x2B] = '\\',
    [0x2C] = 'z',
    [0x2D] = 'x',
    [0x2E] = 'c',
    [0x2F] = 'v',
    [0x30] = 'b',
    [0x31] = 'n',
    [0x32] = 'm',
    [0x33] = ',',
    [0x34] = '.',
    [0x35] = '/',
    [0x36] = -1,   // right shift no es imprimible
    [0x37] = '*',  // (keypad) * es imprimible
    [0x38] = -1,   // left alt no es imprimible
    [0x39] = ' ',  // Espacio
    [0x3A] = -1,   // CapsLock no es imprimible
    [0x3B] = -1,   // F1 no es imprimible
    [0x3C] = -1,   // F2 no es imprimible
    [0x53] = '.',  // (keypad) . es imprimible
    };

char keyToAscii(int key) {
    return printableAscii[key];
}

void putchar(char c, int x, int y) {
    drawchar(c, x * CHAR_WIDTH, y * CHAR_HEIGHT, 0xffffffff, 0x00);
    // screen_char_ptr[y*(DIM_X/CHAR_WIDTH) + x] = c;
    // redrawScreen();
}


// static void redrawScreen() {
//     for (uint16_t j = 0; j < DIM_X / CHAR_WIDTH; j++) {
//         for (uint16_t i = 0; i < DIM_Y / CHAR_HEIGHT; i++) {
//             if ('!' <= screen_char[i*(DIM_X/CHAR_WIDTH) + j] && screen_char[i*(DIM_X/CHAR_WIDTH) + j] <= '~') {
//                 drawchar(screen_char[i*(DIM_X/CHAR_WIDTH) + j], j * CHAR_WIDTH, i * CHAR_HEIGHT, 0xffffffff, 0x00);
//             }
//         }
//     }
// }

void drawchar(unsigned char c, int x, int y, int fgcolor, int bgcolor) {
	int cx, cy;
	int mask[8]={0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01};
	unsigned char *glyph=font_bitmap+(int)c*16;

	for (cy = 0; cy < CHAR_HEIGHT; cy++) {
		for (cx = 0; cx < CHAR_WIDTH; cx++) {
			putPixel(glyph[cy] & mask[cx] ? fgcolor : bgcolor, x + cx, y+cy);
		}
	}

}
